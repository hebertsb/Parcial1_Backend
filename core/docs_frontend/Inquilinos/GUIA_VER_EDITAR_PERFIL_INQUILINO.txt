# GU√çA INQUILINOS - VER Y EDITAR PERFIL
================================================================

## üèòÔ∏è PANEL INQUILINO - GESTI√ìN DE PERFIL PERSONAL

### üìã INFORMACI√ìN GENERAL
- **Rol**: Inquilino
- **Permisos**: Ver y editar su propio perfil b√°sico + funciones de inquilino
- **Acceso**: Panel de inquilino con funciones muy limitadas

---

## üîç 1. VER PERFIL PERSONAL

### Endpoint para obtener datos propios:
```
GET /api/authz/usuarios/me/
```

### Headers requeridos:
```json
{
  "Authorization": "Bearer <token_inquilino>",
  "Content-Type": "application/json"
}
```

### Respuesta esperada:
```json
{
  "id": 15,
  "email": "inquilino@email.com",
  "estado": "ACTIVO",
  "is_staff": false,
  "is_superuser": false,
  "last_login": "2025-09-26T09:15:00Z",
  "date_joined": "2025-09-15T16:30:00Z",
  "persona": {
    "id": 15,
    "nombre": "Carlos Alberto",
    "apellido": "Inquilino",
    "documento_identidad": "11223344",
    "telefono": "72345678",
    "email": "inquilino@email.com",
    "fecha_nacimiento": "1992-07-10",
    "genero": "Masculino",
    "pais": "Bolivia",
    "direccion": "Zona Central #456",
    "tipo_persona": "inquilino",
    "activo": true
  },
  "roles": [
    {
      "id": 4,
      "nombre": "Inquilino",
      "descripcion": "Inquilino de unidad habitacional",
      "activo": true
    }
  ],
  "nombres": "Carlos Alberto",
  "apellidos": "Inquilino",
  "telefono": "72345678",
  "fecha_nacimiento": "1992-07-10",
  "genero": "Masculino",
  "documento_identidad": "11223344",
  "pais": "Bolivia"
}
```

### üí° Informaci√≥n adicional espec√≠fica para inquilinos:
- **Vivienda actual**: Datos de la unidad que habita
- **Propietario**: Informaci√≥n de contacto del propietario
- **Contrato**: Fechas y condiciones de alquiler

---

## ‚úèÔ∏è 2. EDITAR PERFIL PERSONAL (MUY LIMITADO)

### Endpoint para editar datos propios:
```
PATCH /api/authz/usuarios/me/
```

### Headers requeridos:
```json
{
  "Authorization": "Bearer <token_inquilino>",
  "Content-Type": "application/json"
}
```

### ‚ö†Ô∏è Campos MUY LIMITADOS editables por inquilino:
```json
{
  "telefono": "72987654",
  "direccion": "Nueva direcci√≥n temporal #789"
}
```

### üö´ Campos BLOQUEADOS para inquilinos:
- `email`: Solo admin puede cambiar (verificaci√≥n)
- `nombres`: Solo admin puede cambiar (contrato legal)
- `apellidos`: Solo admin puede cambiar (contrato legal)
- `roles`: Solo admin puede cambiar roles
- `estado`: Solo admin puede activar/desactivar
- `fecha_nacimiento`: Solo admin (documento legal)
- `documento_identidad`: Solo admin (verificaci√≥n legal)
- `genero`: Solo admin
- `pais`: Solo admin

### Respuesta exitosa (200 OK):
```json
{
  "id": 15,
  "email": "inquilino@email.com",
  "estado": "ACTIVO",
  "telefono": "72987654",
  "direccion": "Nueva direcci√≥n temporal #789"
}
```

### üí° Mensaje informativo para inquilinos:
> "La mayor√≠a de tus datos personales solo pueden ser modificados por el administrador del edificio. Si necesitas cambiar tu nombre, email o documento, contacta a la administraci√≥n."

---

## üè† 3. VER INFORMACI√ìN DE VIVIENDA

### Endpoint para ver vivienda actual:
```
GET /api/viviendas/mi-vivienda/
```

### Respuesta:
```json
{
  "id": 10,
  "numero_vivienda": "A-101",
  "piso": 1,
  "superficie": 85.5,
  "numero_dormitorios": 3,
  "numero_banos": 2,
  "tiene_balcon": true,
  "precio_alquiler": 1200.00,
  "estado": "ocupada",
  "propietario": {
    "id": 5,
    "nombre_completo": "Mar√≠a Elena Propietaria",
    "telefono": "71234567",
    "email": "propietario@email.com"
  },
  "fecha_inicio_contrato": "2025-01-01",
  "fecha_fin_contrato": "2025-12-31"
}
```

---

## üí∞ 4. VER PAGOS Y EXPENSAS

### Endpoint para ver mis pagos:
```
GET /api/expensas/mis-pagos/
```

### Respuesta:
```json
[
  {
    "id": 25,
    "vivienda": "A-101",
    "mes": "2025-09",
    "monto_alquiler": 1200.00,
    "monto_expensas": 350.00,
    "total": 1550.00,
    "estado": "pagado", 
    "fecha_pago": "2025-09-01T10:00:00Z",
    "fecha_vencimiento": "2025-09-05"
  },
  {
    "id": 26,
    "vivienda": "A-101",
    "mes": "2025-10",
    "monto_alquiler": 1200.00,
    "monto_expensas": 350.00,
    "total": 1550.00,
    "estado": "pendiente",
    "fecha_vencimiento": "2025-10-05"
  }
]
```

---

## üì¢ 5. VER COMUNICADOS

### Endpoint para ver comunicados:
```
GET /api/comunicados/mis-comunicados/
```

### Respuesta:
```json
[
  {
    "id": 30,
    "titulo": "Corte de agua programado",
    "mensaje": "El d√≠a 30 de septiembre habr√° corte de agua de 8:00 a 12:00",
    "fecha_envio": "2025-09-25T14:00:00Z",
    "remitente": "Administraci√≥n",
    "urgente": true,
    "leido": false
  }
]
```

---

## üîê 6. CAMBIAR CONTRASE√ëA

### Endpoint para cambio de contrase√±a:
```
POST /api/authz/change-password/
```

### Datos requeridos:
```json
{
  "password_actual": "contrase√±a_actual",
  "password_nueva": "nueva_contrase√±a_segura",
  "password_nueva_confirm": "nueva_contrase√±a_segura"
}
```

---

## üö® 7. CREAR REPORTES/QUEJAS

### Endpoint para crear reporte de mantenimiento:
```
POST /api/reportes/crear/
```

### Datos:
```json
{
  "tipo": "mantenimiento",
  "titulo": "Problema con grifo de cocina",
  "descripcion": "El grifo de la cocina gotea constantemente",
  "urgencia": "media",
  "ubicacion": "Cocina - A-101"
}
```

---

## üé® RECOMENDACIONES DE UI/UX PARA INQUILINOS

### Dashboard Simplificado:
1. **Informaci√≥n b√°sica** (nombre, tel√©fono, vivienda)
2. **Estado de pagos** (pendientes/pagados)
3. **Comunicados recientes** (con badge si no le√≠dos)
4. **Bot√≥n de emergencia** (contacto r√°pido)

### Secci√≥n "Mi Perfil":
1. **Informaci√≥n personal** (mayor√≠a solo lectura)
2. **Campos editables destacados** (tel√©fono, direcci√≥n temporal)
3. **Mensaje informativo** sobre limitaciones
4. **Contacto administrativo** para cambios mayores

### Interfaz minimal:
- **Solo funciones esenciales**
- **Navegaci√≥n simple**
- **Colores suaves** (no intimidantes)
- **Iconograf√≠a clara**

---

## ‚ö†Ô∏è LIMITACIONES ESTRICTAS PARA INQUILINOS

### üö´ Funciones PROHIBIDAS:
- Ver informaci√≥n de otros inquilinos
- Ver informaci√≥n de propietarios (excepto el suyo)
- Editar datos personales importantes
- Acceder a funciones administrativas
- Cambiar roles o permisos
- Ver informaci√≥n financiera del edificio

### ‚úÖ Funciones PERMITIDAS:
- Ver su propia informaci√≥n b√°sica
- Editar tel√©fono y direcci√≥n temporal
- Ver su vivienda actual
- Ver sus pagos y estado financiero
- Ver comunicados dirigidos a √©l
- Crear reportes de mantenimiento
- Cambiar contrase√±a
- Contactar a su propietario

---

## üîí SEGURIDAD Y PRIVACIDAD

### Protecciones implementadas:
- **Acceso restringido**: Solo ve su propia informaci√≥n
- **Datos sensibles protegidos**: No puede cambiar datos de identificaci√≥n
- **Comunicaci√≥n controlada**: Solo puede contactar a propietario/admin
- **Auditor√≠a**: Cambios registrados para seguridad

---

## üîó ENDPOINTS ESPEC√çFICOS PARA INQUILINOS

### Perfil personal (limitado):
- `GET /api/authz/usuarios/me/` - Ver perfil propio
- `PATCH /api/authz/usuarios/me/` - Editar perfil (solo tel√©fono/direcci√≥n)
- `POST /api/authz/change-password/` - Cambiar contrase√±a

### Informaci√≥n de vivienda:
- `GET /api/viviendas/mi-vivienda/` - Ver vivienda actual
- `GET /api/expensas/mis-pagos/` - Ver historial de pagos

### Comunicaci√≥n:
- `GET /api/comunicados/mis-comunicados/` - Ver comunicados
- `POST /api/reportes/crear/` - Crear reporte de mantenimiento
- `GET /api/contactos/propietario/` - Info de contacto del propietario

---

## üì± CONSIDERACIONES ESPECIALES

### Inquilinos necesitan:
- **Acceso f√°cil** desde m√≥vil
- **Informaci√≥n clara** sobre pagos
- **Comunicaci√≥n directa** con propietario
- **Proceso simple** para reportes
- **Recordatorios** de vencimientos

### Evitar:
- Informaci√≥n confusa o t√©cnica
- Demasiadas opciones
- Funciones que no les corresponden
- Datos de otros inquilinos

---

## üÜò CONTACTOS DE EMERGENCIA

### En caso de necesitar cambios importantes:
- **Administraci√≥n**: admin@edificio.com
- **Propietario**: Ver en "Mi Vivienda"
- **Emergencias**: Bot√≥n directo en la app

---

**Fecha de actualizaci√≥n**: 26 de septiembre de 2025
**Estado**: ‚úÖ FUNCIONAL - Acceso limitado correctamente implementado