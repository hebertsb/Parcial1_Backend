{% extends 'emails/base.html' %}

{% block title %}Nueva Solicitud de Registro - Sistema Condominio{% endblock %}

{% block content %}
<div class="greeting">
    ğŸ‘‹ Estimado Administrador,
</div>

<div class="message">
    Se ha recibido una nueva solicitud de registro de propietario que requiere su revisiÃ³n y aprobaciÃ³n.
</div>

<div class="alert alert-warning">
    <strong>âš ï¸ AcciÃ³n Requerida:</strong> Esta solicitud estÃ¡ pendiente de su aprobaciÃ³n para que el solicitante pueda acceder al sistema.
</div>

<div class="info-box">
    <h3>ğŸ“‹ InformaciÃ³n del Solicitante</h3>
    <div class="info-item">
        <span class="info-label">Nombre:</span>
        <span class="info-value">{{ solicitud.nombres }} {{ solicitud.apellidos }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">Documento:</span>
        <span class="info-value">{{ solicitud.documento_identidad }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">Email:</span>
        <span class="info-value">{{ solicitud.email }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">TelÃ©fono:</span>
        <span class="info-value">{{ solicitud.telefono }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">GÃ©nero:</span>
        <span class="info-value">{{ solicitud.genero|title }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">Fecha Nacimiento:</span>
        <span class="info-value">{{ solicitud.fecha_nacimiento|date:"d/m/Y" }}</span>
    </div>
</div>

<div class="info-box">
    <h3>ğŸ  InformaciÃ³n de la Vivienda</h3>
    <div class="info-item">
        <span class="info-label">NÃºmero de Casa:</span>
        <span class="info-value">{{ solicitud.numero_casa }}</span>
    </div>
    {% if solicitud.vivienda_validada %}
    <div class="info-item">
        <span class="info-label">Bloque:</span>
        <span class="info-value">{{ solicitud.vivienda_validada.bloque|default:"N/A" }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">Tipo:</span>
        <span class="info-value">{{ solicitud.vivienda_validada.tipo_vivienda|default:"N/A" }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">Ãrea:</span>
        <span class="info-value">{{ solicitud.vivienda_validada.area_m2|default:"N/A" }} mÂ²</span>
    </div>
    <div class="alert alert-success">
        âœ… <strong>Vivienda Validada:</strong> La vivienda existe en el sistema y estÃ¡ disponible.
    </div>
    {% else %}
    <div class="alert alert-error">
        âŒ <strong>Vivienda No Validada:</strong> Revisar manualmente la informaciÃ³n de la vivienda.
    </div>
    {% endif %}
</div>

{% if familiares_count > 0 %}
<div class="info-box">
    <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Familiares Registrados</h3>
    <div class="info-item">
        <span class="info-label">Cantidad:</span>
        <span class="info-value">{{ familiares_count }} familiar{{ familiares_count|pluralize:"es" }}</span>
    </div>
</div>
{% endif %}

<div class="info-box">
    <h3>ğŸ“… InformaciÃ³n de la Solicitud</h3>
    <div class="info-item">
        <span class="info-label">Token:</span>
        <span class="info-value">{{ solicitud.token_seguimiento }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">Estado:</span>
        <span class="info-value">{{ solicitud.get_estado_display }}</span>
    </div>
    <div class="info-item">
        <span class="info-label">Fecha Solicitud:</span>
        <span class="info-value">{{ solicitud.created_at|date:"d/m/Y H:i" }}</span>
    </div>
</div>

{% if solicitud.observaciones_solicitante %}
<div class="info-box">
    <h3>ğŸ’¬ Observaciones del Solicitante</h3>
    <p style="color: #4a5568; font-style: italic;">
        "{{ solicitud.observaciones_solicitante }}"
    </p>
</div>
{% endif %}

<div class="divider"></div>

<div style="text-align: center;">
    <p style="font-size: 16px; margin-bottom: 20px;">
        <strong>Para revisar y gestionar esta solicitud:</strong>
    </p>
    
    <a href="{{ admin_panel_url }}/authz/solicitudregistropropietario/{{ solicitud.id }}/change/" class="button">
        ğŸ” Revisar Solicitud
    </a>
    
    <p style="font-size: 14px; color: #718096; margin-top: 15px;">
        TambiÃ©n puede acceder desde el panel administrativo en la secciÃ³n<br>
        <strong>Authz > Solicitudes Registro Propietario</strong>
    </p>
</div>

<div class="divider"></div>

<div class="message" style="font-size: 14px; color: #718096;">
    <strong>Recordatorio:</strong> Las solicitudes deben ser revisadas dentro de las 48 horas posteriores a su recepciÃ³n. 
    El solicitante serÃ¡ notificado automÃ¡ticamente una vez que tome una decisiÃ³n.
</div>
{% endblock %}